import{j as l,s as x,t as j}from"./transform.D34fbgXt.js";import{u as E,l as b,m as v,f as C,p as M,a as N}from"./map.q80aMCoh.js";import{r}from"./index.BVOCwoKb.js";import{s as c}from"./styles_module.f3dabefd.njoTVDCa.js";import{r as k}from"./range.DsrFyqpl.js";import{f as L}from"./forEach.DJv7UHbC.js";const t={container:{class:"flex flex-col "},display:{width:300,height:300,class:"p-0  mb-0 w-full h-auto "},controls:{width:300,height:80,class:"d3-widgets p-0  mb-0 w-full h-auto ",grid:{x:12,y:6}},plot:{margin:20,L:1,agentsize:5},widgets:{button:{id:"play_pause",actions:["play","pause"],value:0,position:{x:2,y:3.5}},slider_size:175,slider_girth:8,slider_knob:9,slider_fontsize:18,sliders:[{id:"omega",label:"Ï‰",range:[.5,3],value:1,position:{x:4,y:2}},{id:"A",label:"A",range:[0,8],value:3,position:{x:4,y:5}}]}},B=(i,d)=>{const o=E(t.controls.width,t.controls.height,t.controls.grid.x,t.controls.grid.y),e=x(i),h=x(d),_=8,a=t.plot.L,n=t.plot.margin;var w={},z=.01,p=b().domain([-a/2,a/2]).range([n,t.display.width-n]),g=b().domain([-a/2,a/2]).range([n,t.display.height-n]);const y=v(k(_),(s,$)=>{let f=2*Math.PI*Math.random();return{theta:f,omega:3+2*$,x:Math.cos(f),y:Math.sin(f)}}),u=C().id(t.widgets.button.id).value(t.widgets.button.value).actions(t.widgets.button.actions).position(o.position(t.widgets.button.position.x,t.widgets.button.position.y)),m=v(t.widgets.sliders,s=>N().id(s.id).label(s.label).range(s.range).value(s.value).fontsize(t.widgets.slider_fontsize).size(t.widgets.slider_size).girth(t.widgets.slider_girth).knob(t.widgets.slider_knob).position(o.position(s.position.x,s.position.y))),A=()=>{L(y,s=>{s.theta+=z*(m[0].value()+m[1].value()*Math.sin(2*s.theta)*Math.sin(2*s.theta)),s.x=Math.cos(s.theta),s.y=Math.sin(s.theta)}),e.selectAll("."+c.agent).attr("transform",function(s){return"translate("+p(a/2*Math.cos(s.theta))+","+g(a/2*Math.sin(s.theta))+")"})},R=s=>{u.value()==1?w=j(A,0):w.stop()};return u.update(R),h.selectAll(null).data([u]).enter().append(M),h.selectAll(null).data(m).enter().append(M),e.append("circle").attr("r",.5*(t.display.width-2*n)).attr("class",c.big_circle).attr("transform","translate("+p(0)+","+g(0)+")"),e.selectAll("."+c.agent).data(y).enter().append("circle").attr("class",c.agent).attr("r",t.plot.agentsize).attr("transform",function(s){return"translate("+p(a/2*Math.cos(s.theta))+","+g(a/2*Math.sin(s.theta))+")"}),e.append("g").attr("class","grid"),()=>{h.selectAll("*").remove(),e.selectAll("*").remove()}},D=({id:i})=>{const d=r.useRef(null),o=r.useRef(null),e=r.useRef(null);return r.useEffect(()=>B(o.current,e.current),[i]),l.jsx(l.Fragment,{children:l.jsxs("div",{ref:d,id:i,className:t.container.class,children:[l.jsx("svg",{ref:o,id:`${i}-display`,className:t.display.class,width:t.display.width,height:t.display.height,viewBox:`0 0 ${t.display.width} ${t.display.height}`}),l.jsx("svg",{ref:e,id:`${i}-controls`,className:t.controls.class,width:t.controls.width,height:t.controls.height,viewBox:`0 0 ${t.controls.width} ${t.controls.height}`})]})})};export{D as default};
