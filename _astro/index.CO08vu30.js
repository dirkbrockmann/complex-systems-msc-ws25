import{j as n,s as $,t as T}from"./transform.D34fbgXt.js";import{l as k,u as Y,m as v,p as E,f as D,a as G}from"./map.q80aMCoh.js";import{r as x}from"./index.BVOCwoKb.js";import{s as i}from"./styles_module.958d8399.Bc6uiALE.js";import{r as H}from"./range.DsrFyqpl.js";import{f as I}from"./forEach.DJv7UHbC.js";import{l as N}from"./last.DXTTfs9a.js";import{a as J,b as K,l as O}from"./line.CHfAYkri.js";import{n as P}from"./normal.ulaXCRiq.js";const t={container:{class:"flex flex-col "},display:{width:600,height:300,class:"p-0  mb-0 w-full h-auto "},controls:{width:600,height:170,class:"d3-widgets p-0  mb-0 w-full h-auto ",grid:{x:12,y:12}},widgets:{slider_size:500,slider_girth:10,slider_knob:12,slider_fontsize:18,sliders:[{id:"sigma",label:"noise strength",range:[0,2],value:.5,position:{x:1,y:2.5}},{id:"k",label:"force strength",range:[0,10],value:.5,position:{x:1,y:6}}],buttons:[{id:"play_pause",actions:["play","pause"],value:0,position:{x:4,y:9.5}},{id:"reset",actions:["rewind"],value:0,position:{x:8,y:9.5}}]},plot:{margin:{l:40,r:30,t:10,b:30},xr:[0,10],yr:[-5,5],xaxis:{label:"t",label_position:{x:280,y:190},fontsize:"16px"},yaxis:{label:"X(t)",label_position:{x:175,y:20},fontsize:"16px"}}},Q=(o,g)=>{const j=t.plot.xr[1];var a=t.plot.xr;const B=t.plot.yr,r=k().domain(a).range([t.plot.margin.l,t.display.width-t.plot.margin.r]),f=k().domain(B).range([t.display.height-t.plot.margin.b,t.plot.margin.t]),h=J(r),C=K(f),z=O().x(s=>r(s.t)).y(s=>f(s.X));var c=[],d=0,_={};const q=P(0,1),A=Y(t.controls.width,t.controls.height,t.controls.grid.x,t.controls.grid.y),e=$(o),y=$(g),F=()=>{d++;let s=w[1].value(),b=w[0].value();I(c,l=>{let M=N(l.trajectory).t,X=N(l.trajectory).X;l.trajectory.push({t:M+.01,X:X-s*.01*X+Math.sqrt(b*.01)*q()}),d>j/.01/2&&l.trajectory.shift()}),d>j/.01/2&&(a=[a[0]+.01,a[1]+.01],r.domain(a),e.select("#xaxis").call(h)),e.selectAll("."+i.agent).data(c).attr("d",l=>z(l.trajectory))},R=()=>{d=0,c=v(H(10),(s,b)=>({id:b,trajectory:[{t:0,X:0}]})),a=t.plot.xr,r.domain(a),e.select("#xaxis").call(h),e.selectAll("."+i.agent).remove(),e.selectAll("."+i.agent).data(c).enter().append("path").attr("d",s=>z(s.trajectory)).attr("class",i.agent).classed(i.singular,s=>s.id==0)},p=v(t.widgets.buttons,s=>D().id(s.id).value(s.value).actions(s.actions).position(A.position(s.position.x,s.position.y))),w=v(t.widgets.sliders,s=>G().id(s.id).label(s.label).range(s.range).value(s.value).fontsize(t.widgets.slider_fontsize).size(t.widgets.slider_size).girth(t.widgets.slider_girth).knob(t.widgets.slider_knob).position(A.position(s.position.x,s.position.y)));R();function L(s){p[0].value()==1?_=T(F,0):_.stop()}return p[0].update(L),p[1].update(R),y.selectAll(null).data(p).enter().append(E),y.selectAll(null).data(w).enter().append(E),e.append("g").datum(t.plot.xaxis).attr("class",i.axis).attr("id","xaxis").attr("transform",function(s){return"translate(0,"+f(0)+")"}).call(h).style("font-size",t.plot.xaxis.fontsize),e.append("g").datum(t.plot.yaxis).attr("class",i.axis).attr("transform",function(s){return"translate("+r(0)+",0)"}).call(C).style("font-size",t.plot.xaxis.fontsize),()=>{y.selectAll("*").remove(),e.selectAll("*").remove()}},it=({id:o})=>{const g=x.useRef(null),m=x.useRef(null),u=x.useRef(null);return x.useEffect(()=>Q(m.current,u.current),[o]),n.jsx(n.Fragment,{children:n.jsxs("div",{ref:g,id:o,className:t.container.class,children:[n.jsx("svg",{ref:m,id:`${o}-display`,className:t.display.class,width:t.display.width,height:t.display.height,viewBox:`0 0 ${t.display.width} ${t.display.height}`}),n.jsx("svg",{ref:u,id:`${o}-controls`,className:t.controls.class,width:t.controls.width,height:t.controls.height,viewBox:`0 0 ${t.controls.width} ${t.controls.height}`})]})})};export{it as default};
