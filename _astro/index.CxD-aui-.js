import{j as l,s as y,t as j}from"./transform.D34fbgXt.js";import{l as x,m as A,u as E,f as N,p as C}from"./map.q80aMCoh.js";import{r as c}from"./index.BVOCwoKb.js";import{s as h}from"./styles_module.4938d03e.njoTVDCa.js";import{r as L}from"./range.DsrFyqpl.js";import{f as z}from"./forEach.DJv7UHbC.js";const t={container:{class:"flex flex-col "},display:{width:300,height:300,class:"p-0  mb-0 w-full h-auto "},controls:{width:300,height:80,class:"d3-widgets p-0  mb-0 w-full h-auto ",grid:{x:12,y:6},button:{id:"play_pause",actions:["play","pause"],value:0,position:{x:6,y:3}}},plot:{margin:20,L:1,agentsize:5}},B=(e,p)=>{const a=y(e),n=y(p),w=3,o=t.plot.L,r=t.plot.margin;var i={},v=.01,d=x().domain([-o/2,o/2]).range([r,t.display.width-r]),u=x().domain([-o/2,o/2]).range([r,t.display.height-r]);const f=A(L(w),(s,$)=>{let m=2*Math.PI*Math.random();return{theta:m,omega:3+2*$,x:Math.cos(m),y:Math.sin(m)}}),b=()=>{z(f,s=>{s.theta+=v*s.omega,s.x=Math.cos(s.theta),s.y=Math.sin(s.theta)}),a.selectAll("."+h.agent).attr("transform",function(s){return"translate("+d(o/2*Math.cos(s.theta))+","+u(o/2*Math.sin(s.theta))+")"})},M=E(t.controls.width,t.controls.height,t.controls.grid.x,t.controls.grid.y),g=N().id(t.controls.button.id).value(t.controls.button.value).actions(t.controls.button.actions).position(M.position(t.controls.button.position.x,t.controls.button.position.y)),R=s=>{g.value()==1?i=j(b,0):i.stop()};return g.update(R),n.selectAll(null).data([g]).enter().append(C),a.append("circle").attr("r",.5*(t.display.width-2*r)).attr("class",h.big_circle).attr("transform","translate("+d(0)+","+u(0)+")"),a.selectAll("."+h.agent).data(f).enter().append("circle").attr("class",h.agent).attr("r",t.plot.agentsize).attr("transform",function(s){return"translate("+d(o/2*Math.cos(s.theta))+","+u(o/2*Math.sin(s.theta))+")"}),a.append("g").attr("class","grid"),()=>{i&&i.stop(),a.selectAll("*").remove(),n.selectAll("*").remove()}},q=({id:e})=>{const p=c.useRef(null),a=c.useRef(null),n=c.useRef(null);return c.useEffect(()=>B(a.current,n.current),[e]),l.jsx(l.Fragment,{children:l.jsxs("div",{ref:p,id:e,className:t.container.class,children:[l.jsx("svg",{ref:a,id:`${e}-display`,className:t.display.class,width:t.display.width,height:t.display.height,viewBox:`0 0 ${t.display.width} ${t.display.height}`}),l.jsx("svg",{ref:n,id:`${e}-controls`,className:t.controls.class,width:t.controls.width,height:t.controls.height,viewBox:`0 0 ${t.controls.width} ${t.controls.height}`})]})})};export{q as default};
